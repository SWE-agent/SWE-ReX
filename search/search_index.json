{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"deployments/","title":"The environment class","text":""},{"location":"deployments/#swerex.deployment.abstract.AbstractDeployment","title":"swerex.deployment.abstract.AbstractDeployment","text":"<p>               Bases: <code>ABC</code></p> <p>Methods:</p> Name Description <code>is_alive</code> <p>Checks if the runtime is alive. The return value can be</p> <code>start</code> <code>stop</code> <p>Attributes:</p> Name Type Description <code>runtime</code> <code>AbstractRuntime</code> Source code in <code>swerex/deployment/abstract.py</code> <pre><code>class AbstractDeployment(ABC):\n    @abstractmethod\n    async def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n        \"\"\"Checks if the runtime is alive. The return value can be\n        tested with bool().\n        \"\"\"\n\n    @abstractmethod\n    async def start(self, *args, **kwargs): ...\n\n    @abstractmethod\n    async def stop(self, *args, **kwargs): ...\n\n    @property\n    @abstractmethod\n    def runtime(self) -&gt; AbstractRuntime: ...\n</code></pre>"},{"location":"deployments/#swerex.deployment.abstract.AbstractDeployment.runtime","title":"runtime  <code>abstractmethod</code> <code>property</code>","text":"<pre><code>runtime: AbstractRuntime\n</code></pre>"},{"location":"deployments/#swerex.deployment.abstract.AbstractDeployment.is_alive","title":"is_alive  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>is_alive(*, timeout: float | None = None) -&gt; IsAliveResponse\n</code></pre> <p>Checks if the runtime is alive. The return value can be tested with bool().</p> Source code in <code>swerex/deployment/abstract.py</code> <pre><code>@abstractmethod\nasync def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n    \"\"\"Checks if the runtime is alive. The return value can be\n    tested with bool().\n    \"\"\"\n</code></pre>"},{"location":"deployments/#swerex.deployment.abstract.AbstractDeployment.start","title":"start  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>start(*args, **kwargs)\n</code></pre> Source code in <code>swerex/deployment/abstract.py</code> <pre><code>@abstractmethod\nasync def start(self, *args, **kwargs): ...\n</code></pre>"},{"location":"deployments/#swerex.deployment.abstract.AbstractDeployment.stop","title":"stop  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>stop(*args, **kwargs)\n</code></pre> Source code in <code>swerex/deployment/abstract.py</code> <pre><code>@abstractmethod\nasync def stop(self, *args, **kwargs): ...\n</code></pre>"},{"location":"runtimes/","title":"Runtime classes","text":"<p>The local runtime has the same interface as the <code>AbstractRuntime</code>.</p>"},{"location":"runtimes/#swerex.runtime.abstract","title":"swerex.runtime.abstract","text":"<p>Classes:</p> Name Description <code>AbstractRuntime</code> <p>This is the main entry point for running stuff</p> <code>Action</code> <p>An action to run in a session.</p> <code>BashIncorrectSyntaxError</code> <p>Before running a bash command, we check for syntax errors.</p> <code>CloseResponse</code> <code>CloseSessionRequest</code> <code>CloseSessionResponse</code> <code>Command</code> <p>A command to run as a subprocess.</p> <code>CommandResponse</code> <code>CommandTimeoutError</code> <code>CreateSessionRequest</code> <code>CreateSessionResponse</code> <code>IsAliveResponse</code> <p>Response to the is_alive request.</p> <code>NoExitCodeError</code> <code>Observation</code> <code>ReadFileRequest</code> <code>ReadFileResponse</code> <code>SessionDoesNotExistError</code> <code>SessionExistsError</code> <code>SweRexception</code> <code>UninitializedShellError</code> <code>UploadRequest</code> <code>UploadResponse</code> <code>WriteFileRequest</code> <code>WriteFileResponse</code>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime","title":"AbstractRuntime","text":"<p>               Bases: <code>ABC</code></p> <p>This is the main entry point for running stuff</p> <p>It keeps track of all the sessions (individual repls) that are currently open.</p> <p>Methods:</p> Name Description <code>close</code> <p>Closes the runtime.</p> <code>close_session</code> <p>Closes a shell session.</p> <code>create_session</code> <p>Creates a new session.</p> <code>execute</code> <p>Executes a command (independent of any shell session).</p> <code>is_alive</code> <p>Checks if the runtime is alive.</p> <code>read_file</code> <p>Reads a file</p> <code>run_in_session</code> <p>Runs a command in a session.</p> <code>upload</code> <p>Uploads a file</p> <code>write_file</code> <p>Writes a file</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class AbstractRuntime(ABC):\n    \"\"\"This is the main entry point for running stuff\n\n    It keeps track of all the sessions (individual repls) that are currently open.\n    \"\"\"\n\n    @abstractmethod\n    async def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n        \"\"\"Checks if the runtime is alive.\"\"\"\n        pass\n\n    @abstractmethod\n    async def create_session(self, request: CreateSessionRequest) -&gt; CreateSessionResponse:\n        \"\"\"Creates a new session.\"\"\"\n        pass\n\n    @abstractmethod\n    async def run_in_session(self, action: Action) -&gt; Observation:\n        \"\"\"Runs a command in a session.\"\"\"\n        pass\n\n    @abstractmethod\n    async def close_session(self, request: CloseSessionRequest):\n        \"\"\"Closes a shell session.\"\"\"\n        pass\n\n    @abstractmethod\n    async def execute(self, command: Command) -&gt; CommandResponse:\n        \"\"\"Executes a command (independent of any shell session).\"\"\"\n        pass\n\n    @abstractmethod\n    async def read_file(self, request: ReadFileRequest) -&gt; ReadFileResponse:\n        \"\"\"Reads a file\"\"\"\n        pass\n\n    @abstractmethod\n    async def write_file(self, request: WriteFileRequest) -&gt; WriteFileResponse:\n        \"\"\"Writes a file\"\"\"\n        pass\n\n    @abstractmethod\n    async def upload(self, request: UploadRequest) -&gt; UploadResponse:\n        \"\"\"Uploads a file\"\"\"\n        pass\n\n    @abstractmethod\n    async def close(self) -&gt; CloseResponse:\n        \"\"\"Closes the runtime.\"\"\"\n        pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.close","title":"close  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>close() -&gt; CloseResponse\n</code></pre> <p>Closes the runtime.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def close(self) -&gt; CloseResponse:\n    \"\"\"Closes the runtime.\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.close_session","title":"close_session  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>close_session(request: CloseSessionRequest)\n</code></pre> <p>Closes a shell session.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def close_session(self, request: CloseSessionRequest):\n    \"\"\"Closes a shell session.\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.create_session","title":"create_session  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>create_session(request: CreateSessionRequest) -&gt; CreateSessionResponse\n</code></pre> <p>Creates a new session.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def create_session(self, request: CreateSessionRequest) -&gt; CreateSessionResponse:\n    \"\"\"Creates a new session.\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.execute","title":"execute  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>execute(command: Command) -&gt; CommandResponse\n</code></pre> <p>Executes a command (independent of any shell session).</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def execute(self, command: Command) -&gt; CommandResponse:\n    \"\"\"Executes a command (independent of any shell session).\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.is_alive","title":"is_alive  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>is_alive(*, timeout: float | None = None) -&gt; IsAliveResponse\n</code></pre> <p>Checks if the runtime is alive.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n    \"\"\"Checks if the runtime is alive.\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.read_file","title":"read_file  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>read_file(request: ReadFileRequest) -&gt; ReadFileResponse\n</code></pre> <p>Reads a file</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def read_file(self, request: ReadFileRequest) -&gt; ReadFileResponse:\n    \"\"\"Reads a file\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.run_in_session","title":"run_in_session  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>run_in_session(action: Action) -&gt; Observation\n</code></pre> <p>Runs a command in a session.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def run_in_session(self, action: Action) -&gt; Observation:\n    \"\"\"Runs a command in a session.\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.upload","title":"upload  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>upload(request: UploadRequest) -&gt; UploadResponse\n</code></pre> <p>Uploads a file</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def upload(self, request: UploadRequest) -&gt; UploadResponse:\n    \"\"\"Uploads a file\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.AbstractRuntime.write_file","title":"write_file  <code>abstractmethod</code> <code>async</code>","text":"<pre><code>write_file(request: WriteFileRequest) -&gt; WriteFileResponse\n</code></pre> <p>Writes a file</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>@abstractmethod\nasync def write_file(self, request: WriteFileRequest) -&gt; WriteFileResponse:\n    \"\"\"Writes a file\"\"\"\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Action","title":"Action  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>An action to run in a session.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class Action(BaseModel):\n    \"\"\"An action to run in a session.\"\"\"\n\n    command: str\n    \"\"\"The command to run.\"\"\"\n\n    session: str = \"default\"\n    \"\"\"The session to run the command in.\"\"\"\n\n    timeout: float | None = None\n    \"\"\"The timeout for the command. None means no timeout.\"\"\"\n\n    is_interactive_command: bool = False\n    \"\"\"For a non-exiting command to an interactive program\n    (e.g., gdb), set this to True.\"\"\"\n\n    is_interactive_quit: bool = False\n    \"\"\"This will disable checking for exit codes, since the command won't terminate.\n    If the command is something like \"quit\" and should terminate the\n    interactive program, set this to False.\n    \"\"\"\n\n    expect: list[str] = []\n    \"\"\"Outputs to expect in addition to the PS1\"\"\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Action.command","title":"command  <code>instance-attribute</code>","text":"<pre><code>command: str\n</code></pre> <p>The command to run.</p>"},{"location":"runtimes/#swerex.runtime.abstract.Action.expect","title":"expect  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>expect: list[str] = []\n</code></pre> <p>Outputs to expect in addition to the PS1</p>"},{"location":"runtimes/#swerex.runtime.abstract.Action.is_interactive_command","title":"is_interactive_command  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>is_interactive_command: bool = False\n</code></pre> <p>For a non-exiting command to an interactive program (e.g., gdb), set this to True.</p>"},{"location":"runtimes/#swerex.runtime.abstract.Action.is_interactive_quit","title":"is_interactive_quit  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>is_interactive_quit: bool = False\n</code></pre> <p>This will disable checking for exit codes, since the command won't terminate. If the command is something like \"quit\" and should terminate the interactive program, set this to False.</p>"},{"location":"runtimes/#swerex.runtime.abstract.Action.session","title":"session  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>session: str = 'default'\n</code></pre> <p>The session to run the command in.</p>"},{"location":"runtimes/#swerex.runtime.abstract.Action.timeout","title":"timeout  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>timeout: float | None = None\n</code></pre> <p>The timeout for the command. None means no timeout.</p>"},{"location":"runtimes/#swerex.runtime.abstract.BashIncorrectSyntaxError","title":"BashIncorrectSyntaxError","text":"<p>               Bases: <code>SweRexception</code>, <code>RuntimeError</code></p> <p>Before running a bash command, we check for syntax errors. This is the error message for those syntax errors.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class BashIncorrectSyntaxError(SweRexception, RuntimeError):\n    \"\"\"Before running a bash command, we check for syntax errors.\n    This is the error message for those syntax errors.\n    \"\"\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CloseResponse","title":"CloseResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class CloseResponse(BaseModel):\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CloseSessionRequest","title":"CloseSessionRequest  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class CloseSessionRequest(BaseModel):\n    session: str = \"default\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CloseSessionRequest.session","title":"session  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>session: str = 'default'\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CloseSessionResponse","title":"CloseSessionResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class CloseSessionResponse(BaseModel):\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Command","title":"Command  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>A command to run as a subprocess.</p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class Command(BaseModel):\n    \"\"\"A command to run as a subprocess.\"\"\"\n\n    command: str | list[str]\n    timeout: float | None = None\n\n    shell: bool = False\n    \"\"\"Same as the subprocess.run() shell argument.\"\"\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Command.command","title":"command  <code>instance-attribute</code>","text":"<pre><code>command: str | list[str]\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Command.shell","title":"shell  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>shell: bool = False\n</code></pre> <p>Same as the subprocess.run() shell argument.</p>"},{"location":"runtimes/#swerex.runtime.abstract.Command.timeout","title":"timeout  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>timeout: float | None = None\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CommandResponse","title":"CommandResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Fields:</p> <ul> <li> <code>stdout</code>                 (<code>str</code>)             </li> <li> <code>stderr</code>                 (<code>str</code>)             </li> <li> <code>exit_code</code>                 (<code>int | None</code>)             </li> </ul> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class CommandResponse(BaseModel):\n    stdout: str = \"\"\n    stderr: str = \"\"\n    exit_code: int | None = None\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CommandResponse.exit_code","title":"exit_code  <code>pydantic-field</code>","text":"<pre><code>exit_code: int | None = None\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CommandResponse.stderr","title":"stderr  <code>pydantic-field</code>","text":"<pre><code>stderr: str = ''\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CommandResponse.stdout","title":"stdout  <code>pydantic-field</code>","text":"<pre><code>stdout: str = ''\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CommandTimeoutError","title":"CommandTimeoutError","text":"<p>               Bases: <code>SweRexception</code>, <code>RuntimeError</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class CommandTimeoutError(SweRexception, RuntimeError): ...\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CreateSessionRequest","title":"CreateSessionRequest  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class CreateSessionRequest(BaseModel):\n    session: str = \"default\"\n    \"\"\"The name of the session to create.\"\"\"\n\n    startup_source: list[str] = []\n    \"\"\"Source the following files before running commands.\n    The reason this gets a special treatment is that these files\n    often overwrite PS1, which we need to reset.\n    \"\"\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CreateSessionRequest.session","title":"session  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>session: str = 'default'\n</code></pre> <p>The name of the session to create.</p>"},{"location":"runtimes/#swerex.runtime.abstract.CreateSessionRequest.startup_source","title":"startup_source  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>startup_source: list[str] = []\n</code></pre> <p>Source the following files before running commands. The reason this gets a special treatment is that these files often overwrite PS1, which we need to reset.</p>"},{"location":"runtimes/#swerex.runtime.abstract.CreateSessionResponse","title":"CreateSessionResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Fields:</p> <ul> <li> <code>output</code>                 (<code>str</code>)             </li> </ul> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class CreateSessionResponse(BaseModel):\n    output: str = \"\"\n    \"\"\"Output from starting the session.\"\"\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.CreateSessionResponse.output","title":"output  <code>pydantic-field</code>","text":"<pre><code>output: str = ''\n</code></pre> <p>Output from starting the session.</p>"},{"location":"runtimes/#swerex.runtime.abstract.IsAliveResponse","title":"IsAliveResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Response to the is_alive request.</p> <p>You can test the result with bool().</p> <p>Fields:</p> <ul> <li> <code>is_alive</code>                 (<code>bool</code>)             </li> <li> <code>message</code>                 (<code>str</code>)             </li> </ul> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class IsAliveResponse(BaseModel):\n    \"\"\"Response to the is_alive request.\n\n    You can test the result with bool().\n    \"\"\"\n\n    is_alive: bool\n\n    message: str = \"\"\n    \"\"\"Error message if is_alive is False.\"\"\"\n\n    def __bool__(self) -&gt; bool:\n        return self.is_alive\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.IsAliveResponse.is_alive","title":"is_alive  <code>pydantic-field</code>","text":"<pre><code>is_alive: bool\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.IsAliveResponse.message","title":"message  <code>pydantic-field</code>","text":"<pre><code>message: str = ''\n</code></pre> <p>Error message if is_alive is False.</p>"},{"location":"runtimes/#swerex.runtime.abstract.IsAliveResponse.__bool__","title":"__bool__","text":"<pre><code>__bool__() -&gt; bool\n</code></pre> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>def __bool__(self) -&gt; bool:\n    return self.is_alive\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.NoExitCodeError","title":"NoExitCodeError","text":"<p>               Bases: <code>SweRexception</code>, <code>RuntimeError</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class NoExitCodeError(SweRexception, RuntimeError): ...\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Observation","title":"Observation  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Fields:</p> <ul> <li> <code>output</code>                 (<code>str</code>)             </li> <li> <code>exit_code</code>                 (<code>int | None</code>)             </li> <li> <code>failure_reason</code>                 (<code>str</code>)             </li> <li> <code>expect_string</code>                 (<code>str</code>)             </li> </ul> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class Observation(BaseModel):\n    output: str = \"\"\n    exit_code: int | None = None\n    failure_reason: str = \"\"\n\n    expect_string: str = \"\"\n    \"\"\"Which of the expect strings was matched to terminate the command.\n    Empty string if the command timed out etc.\n    \"\"\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Observation.exit_code","title":"exit_code  <code>pydantic-field</code>","text":"<pre><code>exit_code: int | None = None\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Observation.expect_string","title":"expect_string  <code>pydantic-field</code>","text":"<pre><code>expect_string: str = ''\n</code></pre> <p>Which of the expect strings was matched to terminate the command. Empty string if the command timed out etc.</p>"},{"location":"runtimes/#swerex.runtime.abstract.Observation.failure_reason","title":"failure_reason  <code>pydantic-field</code>","text":"<pre><code>failure_reason: str = ''\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.Observation.output","title":"output  <code>pydantic-field</code>","text":"<pre><code>output: str = ''\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.ReadFileRequest","title":"ReadFileRequest  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class ReadFileRequest(BaseModel):\n    path: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.ReadFileRequest.path","title":"path  <code>instance-attribute</code>","text":"<pre><code>path: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.ReadFileResponse","title":"ReadFileResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Fields:</p> <ul> <li> <code>content</code>                 (<code>str</code>)             </li> </ul> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class ReadFileResponse(BaseModel):\n    content: str = \"\"\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.ReadFileResponse.content","title":"content  <code>pydantic-field</code>","text":"<pre><code>content: str = ''\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.SessionDoesNotExistError","title":"SessionDoesNotExistError","text":"<p>               Bases: <code>SweRexception</code>, <code>ValueError</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class SessionDoesNotExistError(SweRexception, ValueError): ...\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.SessionExistsError","title":"SessionExistsError","text":"<p>               Bases: <code>SweRexception</code>, <code>ValueError</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class SessionExistsError(SweRexception, ValueError): ...\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.SweRexception","title":"SweRexception","text":"<p>               Bases: <code>RuntimeError</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class SweRexception(RuntimeError): ...\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.UninitializedShellError","title":"UninitializedShellError","text":"<p>               Bases: <code>SweRexception</code>, <code>ValueError</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class UninitializedShellError(SweRexception, ValueError): ...\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.UploadRequest","title":"UploadRequest  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Fields:</p> <ul> <li> <code>source_path</code>                 (<code>str</code>)             </li> <li> <code>target_path</code>                 (<code>str</code>)             </li> </ul> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class UploadRequest(BaseModel):\n    source_path: str\n    target_path: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.UploadRequest.source_path","title":"source_path  <code>pydantic-field</code>","text":"<pre><code>source_path: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.UploadRequest.target_path","title":"target_path  <code>pydantic-field</code>","text":"<pre><code>target_path: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.UploadResponse","title":"UploadResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class UploadResponse(BaseModel):\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.WriteFileRequest","title":"WriteFileRequest  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class WriteFileRequest(BaseModel):\n    content: str\n    path: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.WriteFileRequest.content","title":"content  <code>instance-attribute</code>","text":"<pre><code>content: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.WriteFileRequest.path","title":"path  <code>instance-attribute</code>","text":"<pre><code>path: str\n</code></pre>"},{"location":"runtimes/#swerex.runtime.abstract.WriteFileResponse","title":"WriteFileResponse  <code>pydantic-model</code>","text":"<p>               Bases: <code>BaseModel</code></p> Source code in <code>swerex/runtime/abstract.py</code> <pre><code>class WriteFileResponse(BaseModel):\n    pass\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime","title":"swerex.runtime.local.Runtime","text":"<p>               Bases: <code>AbstractRuntime</code></p> <p>Methods:</p> Name Description <code>__init__</code> <code>close</code> <code>close_session</code> <code>create_session</code> <code>execute</code> <code>is_alive</code> <code>read_file</code> <code>run_in_session</code> <code>upload</code> <code>write_file</code> <p>Attributes:</p> Name Type Description <code>sessions</code> <code>dict[str, Session]</code> Source code in <code>swerex/runtime/local.py</code> <pre><code>class Runtime(AbstractRuntime):\n    def __init__(self):\n        self.sessions: dict[str, Session] = {}\n\n    async def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n        return IsAliveResponse(is_alive=True)\n\n    async def create_session(self, request: CreateSessionRequest) -&gt; CreateSessionResponse:\n        if request.session in self.sessions:\n            msg = f\"session {request.session} already exists\"\n            raise SessionExistsError(msg)\n        shell = Session(request)\n        self.sessions[request.session] = shell\n        return await shell.start()\n\n    async def run_in_session(self, action: Action) -&gt; Observation:\n        if action.session not in self.sessions:\n            msg = f\"session {action.session!r} does not exist\"\n            raise SessionDoesNotExistError(msg)\n        return await self.sessions[action.session].run(action)\n\n    async def close_session(self, request: CloseSessionRequest) -&gt; CloseSessionResponse:\n        if request.session not in self.sessions:\n            msg = f\"session {request.session!r} does not exist\"\n            raise SessionDoesNotExistError(msg)\n        out = await self.sessions[request.session].close()\n        del self.sessions[request.session]\n        return out\n\n    async def execute(self, command: Command) -&gt; CommandResponse:\n        try:\n            result = subprocess.run(command.command, shell=command.shell, timeout=command.timeout, capture_output=True)\n            return CommandResponse(\n                stdout=result.stdout.decode(errors=\"backslashreplace\"),\n                stderr=result.stderr.decode(errors=\"backslashreplace\"),\n                exit_code=result.returncode,\n            )\n        except subprocess.TimeoutExpired as e:\n            msg = f\"Timeout ({command.timeout}s) exceeded while running command\"\n            raise CommandTimeoutError(msg) from e\n\n    async def read_file(self, request: ReadFileRequest) -&gt; ReadFileResponse:\n        content = Path(request.path).read_text()\n        return ReadFileResponse(content=content)\n\n    async def write_file(self, request: WriteFileRequest) -&gt; WriteFileResponse:\n        Path(request.path).parent.mkdir(parents=True, exist_ok=True)\n        Path(request.path).write_text(request.content)\n        return WriteFileResponse()\n\n    async def upload(self, request: UploadRequest) -&gt; UploadResponse:\n        if Path(request.source_path).is_dir():\n            shutil.copytree(request.source_path, request.target_path)\n        else:\n            shutil.copy(request.source_path, request.target_path)\n        return UploadResponse()\n\n    async def close(self) -&gt; CloseResponse:\n        await asyncio.gather(*[self.close_session(CloseSessionRequest(session=s)) for s in self.sessions])\n        return CloseResponse()\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.sessions","title":"sessions  <code>instance-attribute</code>","text":"<pre><code>sessions: dict[str, Session] = {}\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.__init__","title":"__init__","text":"<pre><code>__init__()\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>def __init__(self):\n    self.sessions: dict[str, Session] = {}\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.close","title":"close  <code>async</code>","text":"<pre><code>close() -&gt; CloseResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def close(self) -&gt; CloseResponse:\n    await asyncio.gather(*[self.close_session(CloseSessionRequest(session=s)) for s in self.sessions])\n    return CloseResponse()\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.close_session","title":"close_session  <code>async</code>","text":"<pre><code>close_session(request: CloseSessionRequest) -&gt; CloseSessionResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def close_session(self, request: CloseSessionRequest) -&gt; CloseSessionResponse:\n    if request.session not in self.sessions:\n        msg = f\"session {request.session!r} does not exist\"\n        raise SessionDoesNotExistError(msg)\n    out = await self.sessions[request.session].close()\n    del self.sessions[request.session]\n    return out\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.create_session","title":"create_session  <code>async</code>","text":"<pre><code>create_session(request: CreateSessionRequest) -&gt; CreateSessionResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def create_session(self, request: CreateSessionRequest) -&gt; CreateSessionResponse:\n    if request.session in self.sessions:\n        msg = f\"session {request.session} already exists\"\n        raise SessionExistsError(msg)\n    shell = Session(request)\n    self.sessions[request.session] = shell\n    return await shell.start()\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.execute","title":"execute  <code>async</code>","text":"<pre><code>execute(command: Command) -&gt; CommandResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def execute(self, command: Command) -&gt; CommandResponse:\n    try:\n        result = subprocess.run(command.command, shell=command.shell, timeout=command.timeout, capture_output=True)\n        return CommandResponse(\n            stdout=result.stdout.decode(errors=\"backslashreplace\"),\n            stderr=result.stderr.decode(errors=\"backslashreplace\"),\n            exit_code=result.returncode,\n        )\n    except subprocess.TimeoutExpired as e:\n        msg = f\"Timeout ({command.timeout}s) exceeded while running command\"\n        raise CommandTimeoutError(msg) from e\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.is_alive","title":"is_alive  <code>async</code>","text":"<pre><code>is_alive(*, timeout: float | None = None) -&gt; IsAliveResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n    return IsAliveResponse(is_alive=True)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.read_file","title":"read_file  <code>async</code>","text":"<pre><code>read_file(request: ReadFileRequest) -&gt; ReadFileResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def read_file(self, request: ReadFileRequest) -&gt; ReadFileResponse:\n    content = Path(request.path).read_text()\n    return ReadFileResponse(content=content)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.run_in_session","title":"run_in_session  <code>async</code>","text":"<pre><code>run_in_session(action: Action) -&gt; Observation\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def run_in_session(self, action: Action) -&gt; Observation:\n    if action.session not in self.sessions:\n        msg = f\"session {action.session!r} does not exist\"\n        raise SessionDoesNotExistError(msg)\n    return await self.sessions[action.session].run(action)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.upload","title":"upload  <code>async</code>","text":"<pre><code>upload(request: UploadRequest) -&gt; UploadResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def upload(self, request: UploadRequest) -&gt; UploadResponse:\n    if Path(request.source_path).is_dir():\n        shutil.copytree(request.source_path, request.target_path)\n    else:\n        shutil.copy(request.source_path, request.target_path)\n    return UploadResponse()\n</code></pre>"},{"location":"runtimes/#swerex.runtime.local.Runtime.write_file","title":"write_file  <code>async</code>","text":"<pre><code>write_file(request: WriteFileRequest) -&gt; WriteFileResponse\n</code></pre> Source code in <code>swerex/runtime/local.py</code> <pre><code>async def write_file(self, request: WriteFileRequest) -&gt; WriteFileResponse:\n    Path(request.path).parent.mkdir(parents=True, exist_ok=True)\n    Path(request.path).write_text(request.content)\n    return WriteFileResponse()\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime","title":"swerex.runtime.remote.RemoteRuntime","text":"<p>               Bases: <code>AbstractRuntime</code></p> <p>Methods:</p> Name Description <code>__init__</code> <p>A runtime that connects to a remote server.</p> <code>close</code> <code>close_session</code> <code>create_session</code> <code>execute</code> <code>is_alive</code> <p>Checks if the runtime is alive.</p> <code>read_file</code> <code>run_in_session</code> <code>upload</code> <code>wait_until_alive</code> <code>write_file</code> <p>Attributes:</p> Name Type Description <code>host</code> <code>logger</code> <code>port</code> Source code in <code>swerex/runtime/remote.py</code> <pre><code>class RemoteRuntime(AbstractRuntime):\n    def __init__(self, *, host: str = \"http://127.0.0.1\", port: int = 8000, token: str | None = None):\n        \"\"\"A runtime that connects to a remote server.\n\n        Args:\n            host: The host to connect to.\n            port: The port to connect to.\n            token: The API key to use for authentication (if any)\n        \"\"\"\n        self.logger = get_logger(\"RR\")\n        if not host.startswith(\"http\"):\n            self.logger.warning(\"Host %s does not start with http, adding http://\", host)\n            host = f\"http://{host}\"\n        self.host = host\n        self.port = port\n        self._token = token\n\n    @property\n    def _headers(self) -&gt; dict[str, str]:\n        \"\"\"Request headers to use for authentication.\"\"\"\n        if self._token:\n            return {\"X-API-Key\": self._token}\n        return {}\n\n    @property\n    def _api_url(self) -&gt; str:\n        return f\"{self.host}:{self.port}\"\n\n    def _handle_transfer_exception(self, exc_transfer: _ExceptionTransfer) -&gt; None:\n        \"\"\"Reraise exceptions that were thrown on the remote.\"\"\"\n        if exc_transfer.traceback:\n            self.logger.debug(\"Traceback: %s\", exc_transfer.traceback)\n        try:\n            module, _, exc_name = exc_transfer.class_path.rpartition(\".\")\n            exception = getattr(sys.modules[module], exc_name)\n        except AttributeError:\n            self.logger.error(f\"Unknown exception class: {exc_transfer.class_path!r}\")\n            raise SweRexception(exc_transfer.message) from None\n        raise exception(exc_transfer.message) from None\n\n    def _handle_response_errors(self, response: requests.Response) -&gt; None:\n        \"\"\"Raise exceptions found in the request response.\"\"\"\n        if response.status_code == 511:\n            exc_transfer = _ExceptionTransfer(**response.json()[\"swerexception\"])\n            self._handle_transfer_exception(exc_transfer)\n        response.raise_for_status()\n\n    async def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n        \"\"\"Checks if the runtime is alive.\n\n        Internal server errors are thrown, everything else just has us return False\n        together with the message.\n        \"\"\"\n        try:\n            response = requests.get(f\"{self._api_url}/is_alive\", headers=self._headers, timeout=timeout)\n            if response.status_code == 200:\n                return IsAliveResponse(**response.json())\n            elif response.status_code == 511:\n                exc_transfer = _ExceptionTransfer(**response.json()[\"swerexception\"])\n                self._handle_transfer_exception(exc_transfer)\n            msg = (\n                f\"Status code {response.status_code} from {self._api_url}/is_alive. \"\n                f\"Message: {response.json().get('detail')}\"\n            )\n            return IsAliveResponse(is_alive=False, message=msg)\n        except requests.RequestException:\n            msg = f\"Failed to connect to {self.host}\\n\"\n            msg += traceback.format_exc()\n            self.logger.debug(msg)\n            return IsAliveResponse(is_alive=False, message=msg)\n        except Exception:\n            msg = f\"Failed to connect to {self.host}\\n\"\n            msg += traceback.format_exc()\n            self.logger.debug(msg)\n            return IsAliveResponse(is_alive=False, message=msg)\n\n    async def wait_until_alive(self, *, timeout: float | None = None):\n        return await _wait_until_alive(self.is_alive, timeout=timeout)\n\n    def _request(self, endpoint: str, request: BaseModel | None, output_class: type):\n        \"\"\"Small helper to make requests to the server and handle errors and output.\"\"\"\n        response = requests.post(\n            f\"{self._api_url}/{endpoint}\", json=request.model_dump() if request else None, headers=self._headers\n        )\n        self._handle_response_errors(response)\n        return output_class(**response.json())\n\n    async def create_session(self, request: CreateSessionRequest) -&gt; CreateSessionResponse:\n        return self._request(\"create_session\", request, CreateSessionResponse)\n\n    async def run_in_session(self, action: Action) -&gt; Observation:\n        return self._request(\"run_in_session\", action, Observation)\n\n    async def close_session(self, request: CloseSessionRequest) -&gt; CloseSessionResponse:\n        return self._request(\"close_session\", request, CloseSessionResponse)\n\n    async def execute(self, command: Command) -&gt; CommandResponse:\n        return self._request(\"execute\", command, CommandResponse)\n\n    async def read_file(self, request: ReadFileRequest) -&gt; ReadFileResponse:\n        return self._request(\"read_file\", request, ReadFileResponse)\n\n    async def write_file(self, request: WriteFileRequest) -&gt; WriteFileResponse:\n        return self._request(\"write_file\", request, WriteFileResponse)\n\n    async def upload(self, request: UploadRequest) -&gt; UploadResponse:\n        source = Path(request.source_path)\n        if source.is_dir():\n            with tempfile.TemporaryDirectory() as temp_dir:\n                zip_path = Path(temp_dir) / f\"{source.name}.zip\"\n                shutil.make_archive(str(zip_path.with_suffix(\"\")), \"zip\", source)\n                files = {\"file\": zip_path.open(\"rb\")}\n                data = {\"target_path\": request.target_path, \"unzip\": \"true\"}\n                response = requests.post(f\"{self._api_url}/upload\", files=files, data=data, headers=self._headers)\n                self._handle_response_errors(response)\n                return UploadResponse(**response.json())\n        else:\n            files = {\"file\": source.open(\"rb\")}\n            data = {\"target_path\": request.target_path, \"unzip\": \"false\"}\n            response = requests.post(f\"{self._api_url}/upload\", files=files, data=data, headers=self._headers)\n            self._handle_response_errors(response)\n            return UploadResponse(**response.json())\n\n    async def close(self) -&gt; CloseResponse:\n        return self._request(\"close\", None, CloseResponse)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.host","title":"host  <code>instance-attribute</code>","text":"<pre><code>host = host\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.logger","title":"logger  <code>instance-attribute</code>","text":"<pre><code>logger = get_logger('RR')\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.port","title":"port  <code>instance-attribute</code>","text":"<pre><code>port = port\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.__init__","title":"__init__","text":"<pre><code>__init__(*, host: str = 'http://127.0.0.1', port: int = 8000, token: str | None = None)\n</code></pre> <p>A runtime that connects to a remote server.</p> <p>Parameters:</p> Name Type Description Default <code>host</code> <code>str</code> <p>The host to connect to.</p> <code>'http://127.0.0.1'</code> <code>port</code> <code>int</code> <p>The port to connect to.</p> <code>8000</code> <code>token</code> <code>str | None</code> <p>The API key to use for authentication (if any)</p> <code>None</code> Source code in <code>swerex/runtime/remote.py</code> <pre><code>def __init__(self, *, host: str = \"http://127.0.0.1\", port: int = 8000, token: str | None = None):\n    \"\"\"A runtime that connects to a remote server.\n\n    Args:\n        host: The host to connect to.\n        port: The port to connect to.\n        token: The API key to use for authentication (if any)\n    \"\"\"\n    self.logger = get_logger(\"RR\")\n    if not host.startswith(\"http\"):\n        self.logger.warning(\"Host %s does not start with http, adding http://\", host)\n        host = f\"http://{host}\"\n    self.host = host\n    self.port = port\n    self._token = token\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.close","title":"close  <code>async</code>","text":"<pre><code>close() -&gt; CloseResponse\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def close(self) -&gt; CloseResponse:\n    return self._request(\"close\", None, CloseResponse)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.close_session","title":"close_session  <code>async</code>","text":"<pre><code>close_session(request: CloseSessionRequest) -&gt; CloseSessionResponse\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def close_session(self, request: CloseSessionRequest) -&gt; CloseSessionResponse:\n    return self._request(\"close_session\", request, CloseSessionResponse)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.create_session","title":"create_session  <code>async</code>","text":"<pre><code>create_session(request: CreateSessionRequest) -&gt; CreateSessionResponse\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def create_session(self, request: CreateSessionRequest) -&gt; CreateSessionResponse:\n    return self._request(\"create_session\", request, CreateSessionResponse)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.execute","title":"execute  <code>async</code>","text":"<pre><code>execute(command: Command) -&gt; CommandResponse\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def execute(self, command: Command) -&gt; CommandResponse:\n    return self._request(\"execute\", command, CommandResponse)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.is_alive","title":"is_alive  <code>async</code>","text":"<pre><code>is_alive(*, timeout: float | None = None) -&gt; IsAliveResponse\n</code></pre> <p>Checks if the runtime is alive.</p> <p>Internal server errors are thrown, everything else just has us return False together with the message.</p> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def is_alive(self, *, timeout: float | None = None) -&gt; IsAliveResponse:\n    \"\"\"Checks if the runtime is alive.\n\n    Internal server errors are thrown, everything else just has us return False\n    together with the message.\n    \"\"\"\n    try:\n        response = requests.get(f\"{self._api_url}/is_alive\", headers=self._headers, timeout=timeout)\n        if response.status_code == 200:\n            return IsAliveResponse(**response.json())\n        elif response.status_code == 511:\n            exc_transfer = _ExceptionTransfer(**response.json()[\"swerexception\"])\n            self._handle_transfer_exception(exc_transfer)\n        msg = (\n            f\"Status code {response.status_code} from {self._api_url}/is_alive. \"\n            f\"Message: {response.json().get('detail')}\"\n        )\n        return IsAliveResponse(is_alive=False, message=msg)\n    except requests.RequestException:\n        msg = f\"Failed to connect to {self.host}\\n\"\n        msg += traceback.format_exc()\n        self.logger.debug(msg)\n        return IsAliveResponse(is_alive=False, message=msg)\n    except Exception:\n        msg = f\"Failed to connect to {self.host}\\n\"\n        msg += traceback.format_exc()\n        self.logger.debug(msg)\n        return IsAliveResponse(is_alive=False, message=msg)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.read_file","title":"read_file  <code>async</code>","text":"<pre><code>read_file(request: ReadFileRequest) -&gt; ReadFileResponse\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def read_file(self, request: ReadFileRequest) -&gt; ReadFileResponse:\n    return self._request(\"read_file\", request, ReadFileResponse)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.run_in_session","title":"run_in_session  <code>async</code>","text":"<pre><code>run_in_session(action: Action) -&gt; Observation\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def run_in_session(self, action: Action) -&gt; Observation:\n    return self._request(\"run_in_session\", action, Observation)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.upload","title":"upload  <code>async</code>","text":"<pre><code>upload(request: UploadRequest) -&gt; UploadResponse\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def upload(self, request: UploadRequest) -&gt; UploadResponse:\n    source = Path(request.source_path)\n    if source.is_dir():\n        with tempfile.TemporaryDirectory() as temp_dir:\n            zip_path = Path(temp_dir) / f\"{source.name}.zip\"\n            shutil.make_archive(str(zip_path.with_suffix(\"\")), \"zip\", source)\n            files = {\"file\": zip_path.open(\"rb\")}\n            data = {\"target_path\": request.target_path, \"unzip\": \"true\"}\n            response = requests.post(f\"{self._api_url}/upload\", files=files, data=data, headers=self._headers)\n            self._handle_response_errors(response)\n            return UploadResponse(**response.json())\n    else:\n        files = {\"file\": source.open(\"rb\")}\n        data = {\"target_path\": request.target_path, \"unzip\": \"false\"}\n        response = requests.post(f\"{self._api_url}/upload\", files=files, data=data, headers=self._headers)\n        self._handle_response_errors(response)\n        return UploadResponse(**response.json())\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.wait_until_alive","title":"wait_until_alive  <code>async</code>","text":"<pre><code>wait_until_alive(*, timeout: float | None = None)\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def wait_until_alive(self, *, timeout: float | None = None):\n    return await _wait_until_alive(self.is_alive, timeout=timeout)\n</code></pre>"},{"location":"runtimes/#swerex.runtime.remote.RemoteRuntime.write_file","title":"write_file  <code>async</code>","text":"<pre><code>write_file(request: WriteFileRequest) -&gt; WriteFileResponse\n</code></pre> Source code in <code>swerex/runtime/remote.py</code> <pre><code>async def write_file(self, request: WriteFileRequest) -&gt; WriteFileResponse:\n    return self._request(\"write_file\", request, WriteFileResponse)\n</code></pre>"},{"location":"server/","title":"Server","text":""},{"location":"server/#swerex.server","title":"swerex.server","text":"<p>Functions:</p> Name Description <code>authenticate</code> <p>Authenticate requests with an API key (if set).</p> <code>close</code> <code>close_session</code> <code>create_session</code> <code>exception_handler</code> <p>We catch exceptions that are thrown by the runtime, serialize them to JSON and</p> <code>execute</code> <code>is_alive</code> <code>read_file</code> <code>root</code> <code>run</code> <code>upload</code> <code>write_file</code> <p>Attributes:</p> Name Type Description <code>API_KEY</code> <code>api_key_header</code>"},{"location":"server/#swerex.server.API_KEY","title":"API_KEY  <code>module-attribute</code>","text":"<pre><code>API_KEY = ''\n</code></pre>"},{"location":"server/#swerex.server.api_key_header","title":"api_key_header  <code>module-attribute</code>","text":"<pre><code>api_key_header = APIKeyHeader(name='X-API-Key')\n</code></pre>"},{"location":"server/#swerex.server.authenticate","title":"authenticate  <code>async</code>","text":"<pre><code>authenticate(request: Request, call_next)\n</code></pre> <p>Authenticate requests with an API key (if set).</p> Source code in <code>swerex/server.py</code> <pre><code>@app.middleware(\"http\")\nasync def authenticate(request: Request, call_next):\n    \"\"\"Authenticate requests with an API key (if set).\"\"\"\n    if API_KEY:\n        api_key = await api_key_header(request)\n        if api_key != API_KEY:\n            raise HTTPException(status_code=401, detail=\"Invalid API Key\")\n    return await call_next(request)\n</code></pre>"},{"location":"server/#swerex.server.close","title":"close  <code>async</code>","text":"<pre><code>close()\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/close\")\nasync def close():\n    await runtime.close()\n    return CloseResponse()\n</code></pre>"},{"location":"server/#swerex.server.close_session","title":"close_session  <code>async</code>","text":"<pre><code>close_session(request: CloseSessionRequest)\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/close_session\")\nasync def close_session(request: CloseSessionRequest):\n    return (await runtime.close_session(request)).model_dump()\n</code></pre>"},{"location":"server/#swerex.server.create_session","title":"create_session  <code>async</code>","text":"<pre><code>create_session(request: CreateSessionRequest)\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/create_session\")\nasync def create_session(request: CreateSessionRequest):\n    return (await runtime.create_session(request)).model_dump()\n</code></pre>"},{"location":"server/#swerex.server.exception_handler","title":"exception_handler  <code>async</code>","text":"<pre><code>exception_handler(request: Request, exc: Exception)\n</code></pre> <p>We catch exceptions that are thrown by the runtime, serialize them to JSON and return them to the client so they can reraise them in their own code.</p> Source code in <code>swerex/server.py</code> <pre><code>@app.exception_handler(Exception)\nasync def exception_handler(request: Request, exc: Exception):\n    \"\"\"We catch exceptions that are thrown by the runtime, serialize them to JSON and\n    return them to the client so they can reraise them in their own code.\n    \"\"\"\n    if isinstance(exc, (HTTPException, StarletteHTTPException)):\n        return await http_exception_handler(request, exc)\n    _exc = _ExceptionTransfer(\n        message=str(exc), class_path=type(exc).__module__ + \".\" + type(exc).__name__, traceback=traceback.format_exc()\n    )\n    return JSONResponse(status_code=511, content={\"swerexception\": _exc.model_dump()})\n</code></pre>"},{"location":"server/#swerex.server.execute","title":"execute  <code>async</code>","text":"<pre><code>execute(command: Command)\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/execute\")\nasync def execute(command: Command):\n    return (await runtime.execute(command)).model_dump()\n</code></pre>"},{"location":"server/#swerex.server.is_alive","title":"is_alive  <code>async</code>","text":"<pre><code>is_alive()\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.get(\"/is_alive\")\nasync def is_alive():\n    return (await runtime.is_alive()).model_dump()\n</code></pre>"},{"location":"server/#swerex.server.read_file","title":"read_file  <code>async</code>","text":"<pre><code>read_file(request: ReadFileRequest)\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/read_file\")\nasync def read_file(request: ReadFileRequest):\n    return (await runtime.read_file(request)).model_dump()\n</code></pre>"},{"location":"server/#swerex.server.root","title":"root  <code>async</code>","text":"<pre><code>root()\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.get(\"/\")\nasync def root():\n    return {\"message\": \"hello world\"}\n</code></pre>"},{"location":"server/#swerex.server.run","title":"run  <code>async</code>","text":"<pre><code>run(action: Action)\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/run_in_session\")\nasync def run(action: Action):\n    return (await runtime.run_in_session(action)).model_dump()\n</code></pre>"},{"location":"server/#swerex.server.upload","title":"upload  <code>async</code>","text":"<pre><code>upload(file: UploadFile = File(...), target_path: str = Form(...), unzip: bool = Form(False))\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/upload\")\nasync def upload(\n    file: UploadFile = File(...),\n    target_path: str = Form(...),  # type: ignore\n    unzip: bool = Form(False),\n):\n    target_path: Path = Path(target_path)\n    target_path.parent.mkdir(parents=True, exist_ok=True)\n    # First save the file to a temporary directory and potentially unzip it.\n    with tempfile.TemporaryDirectory() as temp_dir:\n        file_path = Path(temp_dir) / target_path.name\n        try:\n            with open(file_path, \"wb\") as f:\n                f.write(await file.read())\n        finally:\n            await file.close()\n        if unzip:\n            with zipfile.ZipFile(file_path, \"r\") as zip_ref:\n                zip_ref.extractall(target_path)\n        else:\n            shutil.copy(file_path, target_path)\n    return UploadResponse()\n</code></pre>"},{"location":"server/#swerex.server.write_file","title":"write_file  <code>async</code>","text":"<pre><code>write_file(request: WriteFileRequest)\n</code></pre> Source code in <code>swerex/server.py</code> <pre><code>@app.post(\"/write_file\")\nasync def write_file(request: WriteFileRequest):\n    return (await runtime.write_file(request)).model_dump()\n</code></pre>"}]}